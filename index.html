<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>A Studio Vero agradece seu cadastro!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        body { text-align: center; background-color: #b30000; color: white; font-family: Arial, sans-serif; }
        .container { margin-top: 50px; }
        .button { display: inline-block; padding: 15px 20px; background: #25D366; color: white; font-size: 18px; text-decoration: none; border-radius: 5px; }
        .footer { margin-top: 30px; font-size: 12px; }
    </style>
</head>
<body>

    <div class="container">
        <h1>A Studio Vero agradece seu cadastro!</h1>
        <p>Se preferir, voc√™ pode entrar em contato conosco agora mesmo pelo WhatsApp! Basta clicar no bot√£o abaixo.</p>

        <!-- BOT√ÉO DO WHATSAPP -->
        <a id="whatsapp-button" class="button" href="#" target="_blank">
            Fale com nossa equipe pelo WhatsApp
        </a>
    </div>

    <div class="footer">Todos os direitos reservados 2024 ¬© Desenvolvido por V4 Fran√ßa & Co</div>

    <script>
        // Garantir que o c√≥digo s√≥ rode na p√°gina de obrigado
        if (window.location.pathname.includes("/obrigado")) {
            
            // Fun√ß√£o para gerar n√∫mero de protocolo aleat√≥rio
            function gerarProtocolo() {
                return Math.floor(10000 + Math.random() * 90000); // N√∫mero entre 10000 e 99999
            }

            // Fun√ß√£o para capturar UTMs da URL
            function getUTMParams() {
                let params = new URLSearchParams(window.location.search);
                return {
                    utm_source: params.get("utm_source") || "desconhecido",
                    utm_medium: params.get("utm_medium") || "desconhecido",
                    utm_campaign: params.get("utm_campaign") || "desconhecido",
                    utm_term: params.get("utm_term") || "",
                    utm_content: params.get("utm_content") || ""
                };
            }

            // Esperar a p√°gina carregar antes de modificar o bot√£o
            window.addEventListener("load", function () {
                setTimeout(function () {
                    var numeroWhatsApp = "5511916792333"; // Seu n√∫mero do WhatsApp
                    var protocolo = gerarProtocolo();
                    var utms = getUTMParams();

                    // Criar mensagem personalizada com protocolo e UTMs
                    var mensagem = `Voc√™ ser√° transferido para atendimento. Guarde este n√∫mero de protocolo, pois ser√° necess√°rio inform√°-lo para continuar com seu suporte.\n\nüìå *PROTOCOLO:* ${protocolo}\n\n*Aten√ß√£o:* N√£o apague esta mensagem para garantir um atendimento mais r√°pido!`;

                    // Criar o link do WhatsApp com UTMs
                    var linkWhatsApp = `https://wa.me/${numeroWhatsApp}?text=${encodeURIComponent(mensagem)}` +
                                       `&utm_source=${utms.utm_source}&utm_medium=${utms.utm_medium}&utm_campaign=${utms.utm_campaign}&utm_term=${utms.utm_term}&utm_content=${utms.utm_content}`;

                    // Atualizar o bot√£o de WhatsApp na p√°gina
                    var botaoWhatsApp = document.getElementById("whatsapp-button");
                    if (botaoWhatsApp) {
                        botaoWhatsApp.setAttribute("href", linkWhatsApp);
                        console.log("‚úÖ Bot√£o do WhatsApp atualizado:", linkWhatsApp);
                        console.log("üìå Protocolo gerado:", protocolo);
                        console.log("üîó UTMs capturadas:", utms);
                    } else {
                        console.error("‚ùå Nenhum bot√£o do WhatsApp foi encontrado!");
                    }

                }, 1500); // Tempo de espera para garantir que a p√°gina carregou
            });
        }
    </script>

</body>
</html>
